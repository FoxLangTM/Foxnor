        :root { --player-dynamic-color: #1a1a1a; }
        
        @font-face {
  font-family: 'Font Awesome 5 Free';
  font-display: swap;
  src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/webfonts/fa-solid-900.woff2') format('woff2');
}

        body {
            background: linear-gradient(to bottom, var(--player-dynamic-color) 0%, #1A1B20 45%);
            background-attachment: fixed; color: white; margin: 0;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; font-family: 'Red Hat Display', sans-serif;
            transition: background 1.5s ease; user-select: none;
            -webkit-tap-highlight-color: transparent;
            animation: player-gradientMove 10s ease infinite;
            flex-direction: column;
        }

        @keyframes player-gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
               .player-up-container {
            width: 70%;
            position: absolute;
            font-family: sans-serif;
            left: 4%;
            top: 2%;
            height: 28.5px;
            justify-content: left;
            align-items: left;
            color: #8F8F8F;
            font-size: 13px;
            letter-spacing: 1px;
            background: rgba(15, 15, 15);
            border-radius: 28px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            display: flex;
            padding: 5px;
            z-index: 1019;
            overflow: hidden;
            margin-right: auto;
        }
        
        .player-up-container::before {
    content: '';
    width: 6px;
    height: 6px;
    background: #EB0404;
    border-radius: 50%;
    margin-right: 10px;
    margin-up: 10px;
    box-shadow: 0 0 5px #EB0404;
}

        .player-up-container span {
            transform: translateY(15%);
            color: #888;
            font-weight: 300;
            font-variant-numeric: tabular-nums; /* Zapobiega "skakaniu" cyfr */
            text-shadow: 0 0 5px rgba(0,0,0,0.8);
        }
        
        .player-up-container-btn {
            right: 0;
            position: fixed;
            font-family: sans-serif;
            right: 9.5%;
            top: 2%;
            height: 35px;
            width: 35px;
            color: rgba(255, 255, 255, 0.9);
            background: rgba(2, 2, 2);
            border-radius: 28px;
            border: 2px solid #2F3136;
            z-index: 1020;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .player-up-container-btn:hover {
          animation: player-up-container-btn 1.5s forwards;
        }
        
        @keyframes player-up-container-btn {
            0% {
               top: 2%;
               border-radius: 25px;
            }
            20% {
               border-radius: 25px 25px 17px 17px;
               top: 3%;
               rotate: 180deg;
         }
            30% {
               border-radius: 20px 20px 10px 10px;
               top: 4%;
               rotate: 270deg;
             }
            50% {
               border-radius: 45px 45px 30px 17px;
               width: 34px;
               height: 23px;
               top: 5%;
               rotate: 360deg;
               border: none;
            }
            70% {
               border-radius: 35px 35px 25px 17px;
               width: 34px;
               top: 5%;
               rotate: 70deg;
            }
        }

        /* Główny kontener */
        .player-container {
            box-shadow: 0 5px 25px 5px rgba(15, 15, 15); 
            position: fixed;
            width: 90%; max-width: 800px; max-height: 95vh; background-color: #141414;
            backdrop-filter: blur(10px); padding: 10px; border-radius: 35px;
            transition: all 0.3s ease, box-shadow 2s ease-in-out;
            transform: translateY(20px);
            animation: player-revealPlayer 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards, 
                       player-container-pulse 4s ease-in-out infinite;
        }
        
                .player-down-container {
            bottom: 0;
            width: 90%;
            position: relative;
            height: 130px;
            max-height: 85vh;
            color: rgba(255, 255, 255, 0.9);
            background: #121212;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px 20px 0 0;
            border: 2px solid #2F3136;
            border-bottom: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 5px;
            text-align: center;
            transition: height 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                max-height 0.4s ease, 
                background 0.3s ease;
            z-index: 1000;
            overflow: hidden;
            margin-top: auto;
        }
        
        .drag-handle {
    width: 45px;
    height: 4px;
    background: rgba(150, 150, 150, 0.2);
    border-radius: 25px;
    margin-top: 5px;
    transition: margin-left 0.8s cubic-bezier(0.4, 0, 0.2, 1), background 0.5s;
}
        
        .player-down-container:hover {
    transform: translateY(0);
    min-height: 65.7vh;
}
.player-down-container.is-active {
    transform: translateY(0);
    min-height: 65.7vh;
}

.player-down-container.is-active .drag-handle {
    margin-left: 70%;
}

        @keyframes player-revealPlayer {
            to { transform: translateY(0); }
        }

        /* Fullscreen Logic */
        .player-container:fullscreen { width: 100vw; max-width: 100vw; height: 100vh; border-radius: 0; padding: 0; display: flex; flex-direction: column; justify-content: center; background: #000; }
        .player-container:fullscreen .player-video-wrapper { width: 100%; border-radius: 0; margin: 0; flex-grow: 1; }

        /* Nagłówek */
        header { display: flex; align-items: center; margin-bottom: 3px; padding: 0 10px; }
        .player-logo-img { width: 28px; height: 28px; margin-right: 15px; filter: invert(1); opacity: 0.8; transform: scale(1.8);}
        .player-app-name { font-family: 'Saira', sans-serif; font-size: 22px; font-weight: 700; }
        
        .player-video-title-box {
            flex-grow: 1;
            background: rgba(52, 78, 109, 0.4);
            margin-left: 20px;
            padding: 2px 15px;
            border-radius: 12px;
            font-size: 12px;
            color: #aaa;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Wrapper Wideo */
        .player-video-wrapper { transform: translateX(-1px); cursor: none; position: relative; width: 90vw; aspect-ratio: 2010/1136; border-radius: 17.5px; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.4);}
        
        .player-custom-cursor {
            width: 8px; height: 8px;
            background: #fff; border-radius: 50%;
            position: fixed; 
            pointer-events: none; z-index: 99999;
            mix-blend-mode: difference; 
            transition: transform 0.2s, opacity 0.3s ease;
            opacity: 0;
            transform: translate(-50%, -50%);
            will-change: left, top;
        }

        /* Iframe na spodzie */
        #player-main-iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, #1D1D1D 50%, #282828 50%); border: none; z-index: 1; }
        
        /* STREFY GESTÓW */
        .player-gesture-zone { position: absolute; top: 0; height: 100%; width: 25%; z-index: 10; cursor: ns-resize; }
        #player-zone-left { left: 0; }
        #player-zone-right { right: 0; }

        /* Ochrona Wzroku */
        #player-brightness-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: black; opacity: 0; pointer-events: none; z-index: 5; }

        /* Feedback wizualny gestów */
        .player-gesture-indicator { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8); padding: 20px 30px; border-radius: 40px; 
            display: none; flex-direction: column; align-items: center; gap: 10px; z-index: 30; pointer-events: none; 
            border: 1px solid rgba(255,255,255,0.1);
        }
        .player-indicator-bar { width: 100px; height: 3px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 10px; }
        .player-indicator-fill { height: 100%; background: #fff; width: 0%; border-radius: 2px; }

        /* Pasek kontrolny */
        .player-controls-bar {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 55px;
            background: linear-gradient(transparent, rgba(0,0,0,0.95)); 
            display: flex; align-items: center; padding: 0 20px; box-sizing: border-box; z-index: 20;
        }
        .player-control-icon { color: #fff; font-size: 16px; cursor: pointer; margin-left: 18px; opacity: 0.6; transition: 0.2s; }
        .player-control-icon:hover { opacity: 1; transform: scale(1.1); }
        
        .player-progress-container { 
            flex-grow: 1; height: 3px; background: rgba(255,255,255,0.08); 
            margin: 0 15px; cursor: pointer; border-radius: 2px; 
            position: relative; overflow: hidden; transition: height 0.2s;
        }
        .player-progress-container:hover { height: 6px; }

        .player-progress-buffer { 
            position: absolute; top: 0; left: 0; height: 100%; width: 0%; 
            background: rgba(255,255,255,0.15); border-radius: 2px; transition: width 0.4s; 
        }

        .player-progress-fill { 
            position: absolute; top: 0; left: 0; height: 100%; width: 0%; 
            background: var(--player-dynamic-color); border-radius: 2px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.4);
            transition: width 0.2s linear;
        }

        #player-btn-play {
            position: relative;
            overflow: hidden;
        }

        #player-btn-play.fa-play::after {
            content: ''";
            position: absolute;
            top: -50%; left: -150%;
            width: 50%; height: 200%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transform: rotate(25deg);
            animation: player-shine 3s infinite;
        }

        @keyframes player-shine {
            to { left: 150%; }
        }

        /* Info & Opis */
        .player-info-section { display: flex; gap: 15px; overflow-y: auto; flex-shrink: 1; padding: 7px 5px; align-items: flex-start; }
        .player-avatar { width: 45px; height: 45px; border-radius: 25px; background-size: cover; flex-shrink: 0; transition: border 1s; }
        .player-content { flex-grow: 1; }
        .player-video-real-title { font-size: 13px; color: #6b6b6b; font-weight: 500; }
        
        .player-avatar {
            opacity: 0;
            transition: opacity 0.8s ease, border 1s;
            background-position: center;
        }
        .player-avatar.player-loaded {
            opacity: 1;
        }

        /* Avatar Viz */
        .player-avatar-viz {
            position: relative;
            width: 45px;
            height: 45px;
            border: none;
            left: 2px;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center; 
            --player-local-dynamic-color: var(--player-dynamic-color, #ffffff);
        }

        /* System kolców */
        .player-spike-system {
            position: absolute;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: player-rotate-all 20s linear infinite;
            opacity: 0; 
            transition: opacity 0.5s ease;
            pointer-events: none;
        }

        .player-avatar.player-playing + .player-spike-system {
            opacity: 1;
        }

        @keyframes player-spike-anim {
            0% { 
                transform: rotate(var(--angle)) translateY(-25px) scaleY(0.4); 
                opacity: 0.5; 
            }
            100% { 
                transform: rotate(var(--angle)) translateY(-25px) scaleY(1.3); 
                opacity: 1; 
            }
        }

        .player-spike {
            position: absolute;
            width: 2px;
            height: 3px;
            bottom: 50%;
            transform-origin: bottom center;
            filter: blur(0.5px);
            border-radius: 1px;
            background-color: #2e2e2e;
            box-shadow: 0 0 8px hsl(0, 70%, 7%);
            animation: 
                player-spike-anim 0.8s ease-in-out infinite alternate,
                player-color-cycle 20s linear infinite;
            animation-play-state: paused;
        }

        .player-avatar.player-playing + .player-spike-system .player-spike {
            animation-play-state: running;
        }

        @keyframes player-color-cycle {
            0% { 
                background-color: hsl(var(--hue), 80%, 40%); 
                filter: hue-rotate(0deg); 
                box-shadow: 0 0 12px hsl(var(--hue), 80%, 40%);
            }
            10% { background-color: hsl(0, 70%, 25%); filter: hue-rotate(15deg); }
            20% { filter: hue-rotate(30deg); }
            30% { filter: hue-rotate(50deg); }
            40% { filter: hue-rotate(110deg); }
            50% { filter: hue-rotate(180deg); }
            60% { filter: hue-rotate(220deg); }
            80% { filter: hue-rotate(240deg); }
            100% { 
                background-color: hsl(var(--hue), 80%, 40%); 
                filter: hue-rotate(720deg); 
                box-shadow: 0 0 12px hsl(var(--hue), 80%, 40%);
            }
        }

        @keyframes player-rotate-all {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .player-description-area { margin-top: 12px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 10px; display: none; font-size: 12px; color: #888; line-height: 1.6; }
        .player-description-area.player-active { display: block; }
        .player-more-btn { background: none; padding: 5px 12px; display: inline-block; z-index: 11; margin-top: 5px; border: none; color: #59595c; cursor: pointer; font-size: 11px; font-weight: bold; margin-top: 8px; padding: 0; transition: 0.2s; }
        .player-more-btn:hover { color: #888; }
        
        .player-description-area.player-active {
    display: block;
    /* 1. Limit wysokości dla ok. 5 linijek (zakładając line-height 1.6) */
    max-width: 80%; max-height: 270px; 
    overflow-y: auto; /* Włączamy scroll tylko wewnątrz opisu */
    padding-right: 5px; /* Miejsce na scrollbar */
    
    /* Stylowy, minimalistyczny scrollbar dla ochrony wzroku */
    scrollbar-width: thin;
    scrollbar-color: rgba(255,255,255,0.2) transparent;
}

.player-description-area.player-active::-webkit-scrollbar {
    width: 3px;
}
.player-description-area.player-active::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.2);
    border-radius: 10px;
}